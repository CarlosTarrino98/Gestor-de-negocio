{% extends 'base/base_carniceria.html' %}

{% block stylesSecundary %}
{% load static %}
<link rel="stylesheet" type="text/css" href="{% static 'styles/carniceria/facturas/facturas.css' %}">
{% endblock %}

{% block content %}
<h1 class="titulo">Factura: {{ factura.numero_factura }}</h1>

<div class="factura-container">
    <h1>Factura: {{ factura.numero_factura }}</h1>

    <div class="factura-encabezado">
        
        <div class="info-empresa">
            <h3>Datos de contacto</h3>
            <ul>
                <li><strong>Nombre:</strong> {{ empresa.nombre }}</li>
                <li><strong>Teléfono: </strong> {{ empresa.telefono }}</li>
                <li><strong>Email: </strong> {{ empresa.email }}</li>
            </ul>
        </div>

        <div class="logo">
            <img src="{% static 'images/logo_factura.png' %}" alt="Logo Factura" />
        </div>

        <div class="fechas-container">
            <div class="fechas">
                <h3>Fecha de Emisión:</h3>
                <p>{{ factura.fecha_emision }}</p>
            </div>
            <div class="fechas">
                <h3>Fecha de Entrega:</h3>
                <p>{{ factura.fecha_entrega }}</p>
            </div>
        </div>
    </div>

    <div class="factura-implicados">
        <div class="factura-de">
            <h3>Emisor:</h3>
            <ul>
                <li><strong>Nombre:</strong> {{ empresa.nombre }}</li>
                <li><strong>Direccion: </strong> {{ empresa.direccion }}</li>
                <li><strong>CIF/NIF: </strong> {{ empresa.cif_nif }}</li>
            </ul>
        </div>

        <div class="factura-para">
            <h3>Receptor:</h3>
            <ul>
                <li><strong>Nombre:</strong> {{ cliente.nombre }}</li>
                <li><strong>Direccion: </strong> {{ cliente.direccion }}</li>
                <li><strong>CIF/NIF: </strong> {{ cliente.cif_dni }}</li>
            </ul>
        </div>
    </div>

    <table class="factura-productos">
        <thead>
            <tr>
                <th style="width: 25%;">Descripción</th>
                <th style="width: 15%;">Cantidad</th>
                <th style="width: 15%;">Precio (€)</th>
                <th style="width: 15%;">Total Neto (€)</th>
                <th style="width: 15%;">IVA (€)</th>
                <th style="width: 15%;">Importe Total (€)</th>
            </tr>
        </thead>
        <tbody>
            {% for producto in productos %}
            <tr>
                <td>{{ producto.descripcion }}</td>
                <td>{{ producto.cantidad }}</td>
                <td>{{ producto.precio_kg }}</td>
                <td>{{ producto.total_neto }}</td>
                <td>{{ producto.iva }}</td>
                <td>{{ producto.total }}</td>
            </tr>
            {% endfor %}
        </tbody>
        <tfoot>
            <tr>
                <td colspan="5">Total Neto:</td>
                <td colspan="1">{{ totales.neto }} €</td>
            </tr>
            <tr>
                <td colspan="5">IVA (10%):</td>
                <td colspan="1">{{ totales.iva }} €</td>
            </tr>
            <tr style="font-size: 1.5rem;">
                <td colspan="5">Total a Pagar:</td>
                <td colspan="1">{{ totales.total }} €</td>
            </tr>
        </tfoot>
    </table>
</div>

<div class="button-row">
    <a href="{% url 'lista_facturas' %}" class="return">Volver</a>
    <form method="post">
        {% csrf_token %}
        <button type="submit" class="crear">Descargar PDF</button>
    </form>
</div>
{% endblock %}
